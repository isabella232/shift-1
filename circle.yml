machine:
  php:
    version: 5.5.11
  node:
    version: v0.10.28

dependencies:
  pre:
    - composer config --global github-oauth.github.com ${COMPOSER_OAUTH_TOKEN}

test:
  override:
    - phpunit tests
    - ./node_modules/karma/bin/karma start ./shift.conf.js --single-run
  post:
    - phpunit tests --coverage-clover=coverage.clover
    - wget https://scrutinizer-ci.com/ocular.phar
    - php ocular.phar code-coverage:upload --access-token="cac94d22b2ab0b623e2429d0479074b1602e769bb0118b0d0e0bc58217ae7fdc" --format=php-clover coverage.clover