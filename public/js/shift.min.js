var Shift={},Controllers={};!function(t){function e(e,r,a){var o=this;return this.on("click.pjax",e,function(e){var i=t.extend({},d(r,a));i.container||(i.container=t(this).attr("data-pjax")||o),n(e,i)})}function n(e,n,r){r=d(n,r);var o=e.currentTarget;if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==o.protocol||location.hostname!==o.hostname||o.href.indexOf("#")>-1&&f(o)==f(location)||e.isDefaultPrevented())){var i={url:o.href,container:t(o).attr("data-pjax"),target:o},u=t.extend({},i,r),c=t.Event("pjax:click");t(o).trigger(c,[u]),c.isDefaultPrevented()||(a(u),e.preventDefault(),t(o).trigger("pjax:clicked",[u]))}}function r(e,n,r){r=d(n,r);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var i={type:o.method.toUpperCase(),url:o.action,container:t(o).attr("data-pjax"),target:o};if("GET"!==i.type&&void 0!==window.FormData)i.data=new FormData(o),i.processData=!1,i.contentType=!1;else{if(t(o).find(":file").length)return;i.data=t(o).serializeArray()}a(t.extend({},i,r)),e.preventDefault()}function a(e){function n(e,n,a){a||(a={}),a.relatedTarget=r;var o=t.Event(e,a);return u.trigger(o,n),!o.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,a.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var r=e.target,o=p(e.url).hash,u=e.context=h(e.container);e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:u.selector}):e.data._pjax=u.selector;var c;e.beforeSend=function(t,r){return"GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",u.selector),n("pjax:beforeSend",[t,r])?(r.timeout>0&&(c=setTimeout(function(){n("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0),e.requestUrl=p(r.url).href,void 0):!1},e.complete=function(t,r){c&&clearTimeout(c),n("pjax:complete",[t,r,e]),n("pjax:end",[t,e])},e.error=function(t,r,a){var o=x("",t,e),u=n("pjax:error",[t,r,a,e]);"GET"==e.type&&"abort"!==r&&u&&i(o.url)},e.success=function(r,c,l){var f=a.state,d="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,h=l.getResponseHeader("X-PJAX-Version"),m=x(r,l,e);if(d&&h&&d!==h)return i(m.url),void 0;if(!m.contents)return i(m.url),void 0;a.state={id:e.id||s(),url:m.url,title:m.title,container:u.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(a.state,m.title,m.url);try{document.activeElement.blur()}catch(v){}m.title&&(document.title=m.title),n("pjax:beforeReplace",[m.contents,e],{state:a.state,previousState:f}),u.html(m.contents);var j=u.find("input[autofocus], textarea[autofocus]").last()[0];if(j&&document.activeElement!==j&&j.focus(),g(m.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==o){var w=p(m.url);w.hash=o,a.state.url=w.href,window.history.replaceState(a.state,m.title,w.href);var y=document.getElementById(w.hash.slice(1));y&&t(window).scrollTop(t(y).offset().top)}n("pjax:success",[r,c,l,e])},a.state||(a.state={id:s(),url:window.location.href,title:document.title,container:u.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(a.state,document.title));var f=a.xhr;f&&f.readyState<4&&(f.onreadystatechange=t.noop,f.abort()),a.options=e;var f=a.xhr=t.ajax(e);return f.readyState>0&&(e.push&&!e.replace&&(j(a.state.id,u.clone().contents()),window.history.pushState(null,"",l(e.requestUrl))),n("pjax:start",[f,e]),n("pjax:send",[f,e])),a.xhr}function o(e,n){var r={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return a(t.extend(r,d(e,n)))}function i(t){window.history.replaceState(null,"",a.state.url),window.location.replace(t)}function u(e){var n=a.state,r=e.state;if(r&&r.container){if(T&&E==r.url)return;if(a.state&&a.state.id===r.id)return;var o=t(r.container);if(o.length){var u,c=C[r.id];a.state&&(u=a.state.id<r.id?"forward":"back",w(u,a.state.id,o.clone().contents()));var s=t.Event("pjax:popstate",{state:r,direction:u});o.trigger(s);var l={id:r.id,url:r.url,container:o,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1};if(c){o.trigger("pjax:start",[null,l]),a.state=r,r.title&&(document.title=r.title);var p=t.Event("pjax:beforeReplace",{state:r,previousState:n});o.trigger(p,[c,l]),o.html(c),o.trigger("pjax:end",[null,l])}else a(l);o[0].offsetHeight}else i(location.href)}T=!1}function c(e){var n=t.isFunction(e.url)?e.url():e.url,r=e.type?e.type.toUpperCase():"GET",a=t("<form>",{method:"GET"===r?"GET":"POST",action:n,style:"display:none"});"GET"!==r&&"POST"!==r&&a.append(t("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var o=e.data;if("string"==typeof o)t.each(o.split("&"),function(e,n){var r=n.split("=");a.append(t("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if("object"==typeof o)for(key in o)a.append(t("<input>",{type:"hidden",name:key,value:o[key]}));t(document.body).append(a),a.submit()}function s(){return(new Date).getTime()}function l(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function p(t){var e=document.createElement("a");return e.href=t,e}function f(t){return t.href.replace(/#.*/,"")}function d(e,n){return e&&n?n.container=e:n=t.isPlainObject(e)?e:{container:e},n.container&&(n.container=h(n.container)),n}function h(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function m(t,e){return t.filter(e).add(t.find(e))}function v(e){return t.parseHTML(e,document,!0)}function x(e,n,r){var a={},o=/<html/i.test(e);if(a.url=l(n.getResponseHeader("X-PJAX-URL")||r.requestUrl),o)var i=t(v(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),u=t(v(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var i=u=t(v(e));if(0===u.length)return a;if(a.title=m(i,"title").last().text(),r.fragment){if("body"===r.fragment)var c=u;else var c=m(u,r.fragment).first();c.length&&(a.contents="body"===r.fragment?c:c.contents(),a.title||(a.title=c.attr("title")||c.data("title")))}else o||(a.contents=u);return a.contents&&(a.contents=a.contents.not(function(){return t(this).is("title")}),a.contents.find("title").remove(),a.scripts=m(a.contents,"script[src]").remove(),a.contents=a.contents.not(a.scripts)),a.title&&(a.title=t.trim(a.title)),a}function g(e){if(e){var n=t("script[src]");e.each(function(){var e=this.src,r=n.filter(function(){return this.src===e});if(!r.length){var a=document.createElement("script"),o=t(this).attr("type");o&&(a.type=o),a.src=t(this).attr("src"),document.head.appendChild(a)}})}}function j(t,e){C[t]=e,k.push(t),y($,0),y(k,a.defaults.maxCacheLength)}function w(t,e,n){var r,o;C[e]=n,"forward"===t?(r=k,o=$):(r=$,o=k),r.push(e),(e=o.pop())&&delete C[e],y(r,a.defaults.maxCacheLength)}function y(t,e){for(;t.length>e;)delete C[t.shift()]}function b(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function S(){t.fn.pjax=e,t.pjax=a,t.pjax.enable=t.noop,t.pjax.disable=P,t.pjax.click=n,t.pjax.submit=r,t.pjax.reload=o,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:b},t(window).on("popstate.pjax",u)}function P(){t.fn.pjax=function(){return this},t.pjax=c,t.pjax.enable=S,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",u)}var T=!0,E=window.location.href,R=window.history.state;R&&R.container&&(a.state=R),"state"in window.history&&(T=!1);var C={},$=[],k=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?S():P()}(jQuery);var Pjax=Pjax||{};!function(){Pjax.Config=function(){var t={matchBehaviour:"single"},e={matchBehaviour:function(e){if("single"!=e&&"all"!=e)throw new Error("Invalid value for router match behaviour. Available options are: single, all.");t.matchBehaviour=e}},n=function(e){return t[e]},r=function(n,r){if(e[n])e[n](r);else{if(!t[n])throw new Error("Setting ["+n+"] is not configurable.");t[n]=r}};return{get:n,set:r}}()}(),function(t){Pjax.Eventer=function(){var e=function(e,n){t(document).on(e,n)},n=function(t,e){return t(e)},r=function(t,e,r){for(var a=Pjax.Utility.determineHttpVerb(t,e),o=Pjax.Router.match(e.url,a,r),i=0;i<o.length;i++){var u={xhr:t,options:e,route:o[i]};return n(o[i].handler,u)}};return e("pjax:start",function(t,e,n){r(e,n,"before")}),e("pjax:end",function(t,e,n){r(e,n,"after")}),{listen:e}}()}(jQuery),function(){Pjax.Request=function(t,e){this.xhr=t,this.options=e,this.headers=t.headers,this.data=e.data,this.method=Pjax.Utility.determineHttpVerb(t,e),this.url=e.url}}(),function(){Pjax.Response=function(t,e){this.xhr=t,this.headers=t.headers,this.request=e,this.content=this.isJSON()?JSON.decode(t.response):t.response,this.isJSON=function(){return"json"==t.response},this.isHTML=function(){return!this.isJSON()}}}(),function(){Pjax.Route=function(t,e,n,r){if("string"!=typeof t)throw new Error("You must provide the pattern argument as a string when registering a new Route object.");if("string"!=typeof e)throw new Error("You must provide the method argument as a string when registering a new Route object.");if("function"!=typeof n)throw new Error("You must provide the handler argument as a function callback when registering a new Route object.");r=r||{when:"after"};var a=function(t){return t=t.replace(/:any/gi,"(.*)").replace(/:id/gi,"([0-9]+)").replace(/:alphanum/gi,"([a-z0-9\\-]+)").replace(/:alpha/gi,"([a-z\\-]+)").replace(/:(?=\/)+/gi,"([^/]+)"),new RegExp(t)},o=function(t,e,n){return n=n||"after",u.method==e&&u.options&&u.options.when==n?u.regex.test(t):!1},i=a(t),u={pattern:t,regex:i,method:e,handler:n,options:r,matches:o};return u}}(),function(){Pjax.Router=function(){var t=[],e=function(t,e,n){o(t,"get",e,n)},n=function(t,e,n){o(t,"post",e,n)},r=function(t,e,n){o(t,"delete",e,n)},a=function(t,e,n){o(t,"put",e,n)},o=function(e,n,r,a){t.push(Pjax.Route(e,n,r,a))},i=function(e,n,r){for(var a=[],o=0;o<t.length&&(!t[o].matches(e,n,r)||(a.push(t[o]),"single"!=Pjax.Config.get("matchBehaviour")));o++);return a},u=function(){t=[]},c=function(){return t};return{clear:u,get:e,post:n,put:a,del:r,"delete":r,match:i,getRoutes:c}}()}(),function(){Pjax.Utility=function(){var t=function(t,e){var n=e.type;return e.data&&e.data._method&&(n=e.data._method),n.toLowerCase()};return{determineHttpVerb:t}}()}(),function(){$(".menu .parent span").click(function(){$(this).parent().toggleClass("active")});var t=4e3,e=function(t){$.pjax.submit(t,"#content")};$(document).pjax("#content a","#content",{timeout:t}),$(document).on("submit","form[data-pjax]",e,{timeout:t}),$("#accountName").click(function(){$("#accountName").hide(),$("#accountSwitcher").select2({placeholder:"",minimumInputLength:1,ajax:{url:"http://shift2.app/auth/accounts",dataType:"json",quietMillis:250,data:function(t){return{q:t}},results:function(t){return{results:t}}},formatResult:function(t){return'<span class="account-switcher-result">'+t.text+"</span>"},formatSelection:function(t){return t.text}}),$("#accountSwitcher").on("select2-selecting",function(t){window.location.href="/auth/account/"+t.val}),$("#accountSwitcher").on("select2-close",function(){$("#accountName").show(),$("#accountSwitcher").select2("destroy")})})}();