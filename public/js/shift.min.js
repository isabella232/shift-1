var Shift={},Controllers={};!function(t){function e(e,r,a){var i=this;return this.on("click.pjax",e,function(e){var o=t.extend({},f(r,a));o.container||(o.container=t(this).attr("data-pjax")||i),n(e,o)})}function n(e,n,r){r=f(n,r);var i=e.currentTarget;if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==i.protocol||location.hostname!==i.hostname||i.href.indexOf("#")>-1&&p(i)==p(location)||e.isDefaultPrevented())){var o={url:i.href,container:t(i).attr("data-pjax"),target:i},s=t.extend({},o,r),u=t.Event("pjax:click");t(i).trigger(u,[s]),u.isDefaultPrevented()||(a(s),e.preventDefault(),t(i).trigger("pjax:clicked",[s]))}}function r(e,n,r){r=f(n,r);var i=e.currentTarget;if("FORM"!==i.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var o={type:i.method.toUpperCase(),url:i.action,container:t(i).attr("data-pjax"),target:i};if("GET"!==o.type&&void 0!==window.FormData)o.data=new FormData(i),o.processData=!1,o.contentType=!1;else{if(t(i).find(":file").length)return;o.data=t(i).serializeArray()}a(t.extend({},o,r)),e.preventDefault()}function a(e){function n(e,n,a){a||(a={}),a.relatedTarget=r;var i=t.Event(e,a);return s.trigger(i,n),!i.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,a.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var r=e.target,i=d(e.url).hash,s=e.context=h(e.container);e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:s.selector}):e.data._pjax=s.selector;var u;e.beforeSend=function(t,r){return"GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",s.selector),n("pjax:beforeSend",[t,r])?(r.timeout>0&&(u=setTimeout(function(){n("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0),e.requestUrl=d(r.url).href,void 0):!1},e.complete=function(t,r){u&&clearTimeout(u),n("pjax:complete",[t,r,e]),n("pjax:end",[t,e])},e.error=function(t,r,a){var i=g("",t,e),s=n("pjax:error",[t,r,a,e]);"GET"==e.type&&"abort"!==r&&s&&o(i.url)},e.success=function(r,u,l){var p=a.state,f="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,h=l.getResponseHeader("X-PJAX-Version"),m=g(r,l,e);if(f&&h&&f!==h)return o(m.url),void 0;if(!m.contents)return o(m.url),void 0;a.state={id:e.id||c(),url:m.url,title:m.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(a.state,m.title,m.url);try{document.activeElement.blur()}catch(v){}m.title&&(document.title=m.title),n("pjax:beforeReplace",[m.contents,e],{state:a.state,previousState:p}),s.html(m.contents);var y=s.find("input[autofocus], textarea[autofocus]").last()[0];if(y&&document.activeElement!==y&&y.focus(),x(m.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==i){var w=d(m.url);w.hash=i,a.state.url=w.href,window.history.replaceState(a.state,m.title,w.href);var j=document.getElementById(w.hash.slice(1));j&&t(window).scrollTop(t(j).offset().top)}n("pjax:success",[r,u,l,e])},a.state||(a.state={id:c(),url:window.location.href,title:document.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(a.state,document.title));var p=a.xhr;p&&p.readyState<4&&(p.onreadystatechange=t.noop,p.abort()),a.options=e;var p=a.xhr=t.ajax(e);return p.readyState>0&&(e.push&&!e.replace&&(y(a.state.id,s.clone().contents()),window.history.pushState(null,"",l(e.requestUrl))),n("pjax:start",[p,e]),n("pjax:send",[p,e])),a.xhr}function i(e,n){var r={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return a(t.extend(r,f(e,n)))}function o(t){window.history.replaceState(null,"",a.state.url),window.location.replace(t)}function s(e){var n=a.state,r=e.state;if(r&&r.container){if(A&&C==r.url)return;if(a.state&&a.state.id===r.id)return;var i=t(r.container);if(i.length){var s,u=N[r.id];a.state&&(s=a.state.id<r.id?"forward":"back",w(s,a.state.id,i.clone().contents()));var c=t.Event("pjax:popstate",{state:r,direction:s});i.trigger(c);var l={id:r.id,url:r.url,container:i,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1};if(u){i.trigger("pjax:start",[null,l]),a.state=r,r.title&&(document.title=r.title);var d=t.Event("pjax:beforeReplace",{state:r,previousState:n});i.trigger(d,[u,l]),i.html(u),i.trigger("pjax:end",[null,l])}else a(l);i[0].offsetHeight}else o(location.href)}A=!1}function u(e){var n=t.isFunction(e.url)?e.url():e.url,r=e.type?e.type.toUpperCase():"GET",a=t("<form>",{method:"GET"===r?"GET":"POST",action:n,style:"display:none"});"GET"!==r&&"POST"!==r&&a.append(t("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var i=e.data;if("string"==typeof i)t.each(i.split("&"),function(e,n){var r=n.split("=");a.append(t("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if("object"==typeof i)for(key in i)a.append(t("<input>",{type:"hidden",name:key,value:i[key]}));t(document.body).append(a),a.submit()}function c(){return(new Date).getTime()}function l(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function d(t){var e=document.createElement("a");return e.href=t,e}function p(t){return t.href.replace(/#.*/,"")}function f(e,n){return e&&n?n.container=e:n=t.isPlainObject(e)?e:{container:e},n.container&&(n.container=h(n.container)),n}function h(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function m(t,e){return t.filter(e).add(t.find(e))}function v(e){return t.parseHTML(e,document,!0)}function g(e,n,r){var a={},i=/<html/i.test(e);if(a.url=l(n.getResponseHeader("X-PJAX-URL")||r.requestUrl),i)var o=t(v(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),s=t(v(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var o=s=t(v(e));if(0===s.length)return a;if(a.title=m(o,"title").last().text(),r.fragment){if("body"===r.fragment)var u=s;else var u=m(s,r.fragment).first();u.length&&(a.contents="body"===r.fragment?u:u.contents(),a.title||(a.title=u.attr("title")||u.data("title")))}else i||(a.contents=s);return a.contents&&(a.contents=a.contents.not(function(){return t(this).is("title")}),a.contents.find("title").remove(),a.scripts=m(a.contents,"script[src]").remove(),a.contents=a.contents.not(a.scripts)),a.title&&(a.title=t.trim(a.title)),a}function x(e){if(e){var n=t("script[src]");e.each(function(){var e=this.src,r=n.filter(function(){return this.src===e});if(!r.length){var a=document.createElement("script"),i=t(this).attr("type");i&&(a.type=i),a.src=t(this).attr("src"),document.head.appendChild(a)}})}}function y(t,e){N[t]=e,R.push(t),j(P,0),j(R,a.defaults.maxCacheLength)}function w(t,e,n){var r,i;N[e]=n,"forward"===t?(r=R,i=P):(r=P,i=R),r.push(e),(e=i.pop())&&delete N[e],j(r,a.defaults.maxCacheLength)}function j(t,e){for(;t.length>e;)delete N[t.shift()]}function b(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function T(){t.fn.pjax=e,t.pjax=a,t.pjax.enable=t.noop,t.pjax.disable=S,t.pjax.click=n,t.pjax.submit=r,t.pjax.reload=i,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:b},t(window).on("popstate.pjax",s)}function S(){t.fn.pjax=function(){return this},t.pjax=u,t.pjax.enable=T,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",s)}var A=!0,C=window.location.href,E=window.history.state;E&&E.container&&(a.state=E),"state"in window.history&&(A=!1);var N={},P=[],R=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?T():S()}(jQuery);var Pjax=Pjax||{};!function(){Pjax.Config=function(){var t={matchBehaviour:"single"},e={matchBehaviour:function(e){if("single"!=e&&"all"!=e)throw new Error("Invalid value for router match behaviour. Available options are: single, all.");t.matchBehaviour=e}},n=function(e){return t[e]},r=function(n,r){if(e[n])e[n](r);else{if(!t[n])throw new Error("Setting ["+n+"] is not configurable.");t[n]=r}};return{get:n,set:r}}()}(),function(t){Pjax.Eventer=function(){var e=function(e,n){t(document).on(e,n)},n=function(t,e){return t(e)},r=function(t,e,r){for(var a=Pjax.Utility.determineHttpVerb(t,e),i=Pjax.Router.match(e.url,a,r),o=0;o<i.length;o++){var s={xhr:t,options:e,route:i[o]};return n(i[o].handler,s)}};return e("pjax:start",function(t,e,n){r(e,n,"before")}),e("pjax:end",function(t,e,n){r(e,n,"after")}),{listen:e}}()}(jQuery),function(){Pjax.Request=function(t,e){this.xhr=t,this.options=e,this.headers=t.headers,this.data=e.data,this.method=Pjax.Utility.determineHttpVerb(t,e),this.url=e.url}}(),function(){Pjax.Response=function(t,e){this.xhr=t,this.headers=t.headers,this.request=e,this.content=this.isJSON()?JSON.decode(t.response):t.response,this.isJSON=function(){return"json"==t.response},this.isHTML=function(){return!this.isJSON()}}}(),function(){Pjax.Route=function(t,e,n,r){if("string"!=typeof t)throw new Error("You must provide the pattern argument as a string when registering a new Route object.");if("string"!=typeof e)throw new Error("You must provide the method argument as a string when registering a new Route object.");if("function"!=typeof n)throw new Error("You must provide the handler argument as a function callback when registering a new Route object.");r=r||{when:"after"};var a=function(t){return t=t.replace(/:any/gi,"(.*)").replace(/:id/gi,"([0-9]+)").replace(/:alphanum/gi,"([a-z0-9\\-]+)").replace(/:alpha/gi,"([a-z\\-]+)").replace(/:(?=\/)+/gi,"([^/]+)"),new RegExp(t)},i=function(t,e,n){return n=n||"after",s.method==e&&s.options&&s.options.when==n?s.regex.test(t):!1},o=a(t),s={pattern:t,regex:o,method:e,handler:n,options:r,matches:i};return s}}(),function(){Pjax.Router=function(){var t=[],e=function(t,e,n){i(t,"get",e,n)},n=function(t,e,n){i(t,"post",e,n)},r=function(t,e,n){i(t,"delete",e,n)},a=function(t,e,n){i(t,"put",e,n)},i=function(e,n,r,a){t.push(Pjax.Route(e,n,r,a))},o=function(e,n,r){for(var a=[],i=0;i<t.length&&(!t[i].matches(e,n,r)||(a.push(t[i]),"single"!=Pjax.Config.get("matchBehaviour")));i++);return a},s=function(){t=[]},u=function(){return t};return{clear:s,get:e,post:n,put:a,del:r,"delete":r,match:o,getRoutes:u}}()}(),function(){Pjax.Utility=function(){var t=function(t,e){var n=e.type;return e.data&&e.data._method&&(n=e.data._method),n.toLowerCase()};return{determineHttpVerb:t}}()}(),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,r=document.createElement(t||"div");for(n in e)r[n]=e[n];return r}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,r){var a=["opacity",e,~~(100*t),n,r].join("-"),i=.01+n/r*100,o=Math.max(1-(1-t)/e*(100-i),t),s=c.substring(0,c.indexOf("Animation")).toLowerCase(),u=s&&"-"+s+"-"||"";return d[a]||(p.insertRule("@"+u+"keyframes "+a+"{0%{opacity:"+o+"}"+i+"%{opacity:"+t+"}"+(i+.01)+"%{opacity:1}"+(i+e)%100+"%{opacity:"+t+"}100%{opacity:"+o+"}}",p.cssRules.length),d[a]=1),a}function r(t,e){var n,r,a=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<l.length;r++)if(n=l[r]+e,void 0!==a[n])return n;return void 0!==a[e]?e:void 0}function a(t,e){for(var n in e)t.style[r(t,n)||n]=e[n];return t}function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)void 0===t[r]&&(t[r]=n[r])}return t}function o(t,e){return"string"==typeof t?t:t[e%t.length]}function s(t){this.opts=i(t||{},s.defaults,f)}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(t,r){function i(){return a(n("group",{coordsize:l+" "+l,coordorigin:-c+" "+-c}),{width:l,height:l})}function s(t,s,u){e(p,e(a(i(),{rotation:360/r.lines*t+"deg",left:~~s}),e(a(n("roundrect",{arcsize:r.corners}),{width:c,height:r.width,left:r.radius,top:-r.width>>1,filter:u}),n("fill",{color:o(r.color,t),opacity:r.opacity}),n("stroke",{opacity:0}))))}var u,c=r.length+r.width,l=2*c,d=2*-(r.width+r.length)+"px",p=a(i(),{position:"absolute",top:d,left:d});if(r.shadow)for(u=1;u<=r.lines;u++)s(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=r.lines;u++)s(u);return e(t,p)},s.prototype.opacity=function(t,e,n,r){var a=t.firstChild;r=r.shadow&&r.lines||0,a&&e+r<a.childNodes.length&&(a=a.childNodes[e+r],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=n))}}var c,l=["webkit","Moz","ms","O"],d={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},i(s.prototype,{spin:function(e){this.stop();{var n=this,r=n.opts,i=n.el=a(t(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});r.radius+r.length+r.width}if(a(i,{left:r.left,top:r.top}),e&&e.insertBefore(i,e.firstChild||null),i.setAttribute("role","progressbar"),n.lines(i,n.opts),!c){var o,s=0,u=(r.lines-1)*(1-r.direction)/2,l=r.fps,d=l/r.speed,p=(1-r.opacity)/(d*r.trail/100),f=d/r.lines;!function h(){s++;for(var t=0;t<r.lines;t++)o=Math.max(1-(s+(r.lines-t)*f)%d*p,r.opacity),n.opacity(i,t*r.direction+u,o,r);n.timeout=n.el&&setTimeout(h,~~(1e3/l))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(r,i){function s(e,n){return a(t(),{position:"absolute",width:i.length+i.width+"px",height:i.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*l+i.rotate)+"deg) translate("+i.radius+"px,0)",borderRadius:(i.corners*i.width>>1)+"px"})}for(var u,l=0,d=(i.lines-1)*(1-i.direction)/2;l<i.lines;l++)u=a(t(),{position:"absolute",top:1+~(i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:c&&n(i.opacity,i.trail,d+l*i.direction,i.lines)+" "+1/i.speed+"s linear infinite"}),i.shadow&&e(u,a(s("#000","0 0 4px #000"),{top:"2px"})),e(r,e(u,s(o(i.color,l),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var h=a(t("group"),{behavior:"url(#default#VML)"});return!r(h,"transform")&&h.adj?u():c=r(h,"animation"),s}),function(t,e){"object"==typeof exports?module.exports=e(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],e):t.Ladda=e(t.Spinner)}(this,function(t){"use strict";function e(t){if("undefined"==typeof t)return console.warn("Ladda button target must be defined."),void 0;t.querySelector(".ladda-label")||(t.innerHTML='<span class="ladda-label">'+t.innerHTML+"</span>");var e,n=document.createElement("span");n.className="ladda-spinner",t.appendChild(n);var r,a={start:function(){return e||(e=o(t)),t.setAttribute("disabled",""),t.setAttribute("data-loading",""),clearTimeout(r),e.spin(n),this.setProgress(0),this},startAfter:function(t){return clearTimeout(r),r=setTimeout(function(){a.start()},t),this},stop:function(){return t.removeAttribute("disabled"),t.removeAttribute("data-loading"),clearTimeout(r),e&&(r=setTimeout(function(){e.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(e){e=Math.max(Math.min(e,1),0);var n=t.querySelector(".ladda-progress");0===e&&n&&n.parentNode?n.parentNode.removeChild(n):(n||(n=document.createElement("div"),n.className="ladda-progress",t.appendChild(n)),n.style.width=(e||0)*t.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),t.setAttribute("disabled",""),this},isLoading:function(){return t.hasAttribute("data-loading")},remove:function(){clearTimeout(r),t.removeAttribute("disabled",""),t.removeAttribute("data-loading",""),e&&(e.stop(),e=null);for(var n=0,i=u.length;i>n;n++)if(a===u[n]){u.splice(n,1);break}}};return u.push(a),a}function n(t,e){for(;t.parentNode&&t.tagName!==e;)t=t.parentNode;return e===t.tagName?t:void 0}function r(t){for(var e=["input","textarea"],n=[],r=0;r<e.length;r++)for(var a=t.getElementsByTagName(e[r]),i=0;i<a.length;i++)a[i].hasAttribute("required")&&n.push(a[i]);return n}function a(t,a){a=a||{};var i=[];"string"==typeof t?i=s(document.querySelectorAll(t)):"object"==typeof t&&"string"==typeof t.nodeName&&(i=[t]);for(var o=0,u=i.length;u>o;o++)!function(){var t=i[o];if("function"==typeof t.addEventListener){var s=e(t),u=-1;t.addEventListener("click",function(){var e=!0,i=n(t,"FORM");if("undefined"!=typeof i)for(var o=r(i),c=0;c<o.length;c++)""===o[c].value.replace(/^\s+|\s+$/g,"")&&(e=!1);e&&(s.startAfter(1),"number"==typeof a.timeout&&(clearTimeout(u),u=setTimeout(s.stop,a.timeout)),"function"==typeof a.callback&&a.callback.apply(null,[s]))},!1)}}()}function i(){for(var t=0,e=u.length;e>t;t++)u[t].stop()}function o(e){var n,r=e.offsetHeight;0===r&&(r=parseFloat(window.getComputedStyle(e).height)),r>32&&(r*=.8),e.hasAttribute("data-spinner-size")&&(r=parseInt(e.getAttribute("data-spinner-size"),10)),e.hasAttribute("data-spinner-color")&&(n=e.getAttribute("data-spinner-color"));var a=12,i=.2*r,o=.6*i,s=7>i?2:3;return new t({color:n||"#fff",lines:a,radius:i,length:o,width:s,zIndex:"auto",top:"auto",left:"auto",className:""})}function s(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}var u=[];return{bind:a,create:e,stopAll:i}}),function(t,e){if(void 0===e)return console.error("jQuery required for Ladda.jQuery");var n=[];e=e.extend(e,{ladda:function(e){"stopAll"===e&&t.stopAll()}}),e.fn=e.extend(e.fn,{ladda:function(r){var a=n.slice.call(arguments,1);return"bind"===r?(a.unshift(e(this).selector),t.bind.apply(t,a)):e(this).each(function(){var n,i=e(this);void 0===r?i.data("ladda",t.create(this)):(n=i.data("ladda"),n[r].apply(n,a))}),this}})}(this.Ladda,this.jQuery),function(t){t(".menu .parent span").click(function(){t(this).parent().toggleClass("active")});var e=4e3,n="#pjaxContainer",r=t("#loader"),a=function(e){var r=t(".ladda-button").ladda();r.ladda("start"),t.pjax.submit(e,n)};t(document).pjax("#content a, #navigation a",n,{timeout:e}),t(document).on("submit","form[data-pjax]",a),t(document).on("pjax:send",function(){r.show().fadeTo(250,.8)}),t(document).on("pjax:end",function(){r.fadeTo(250,0,function(){t(this).hide()})}),t("#navigation a").click(function(){t("#navigation a").removeClass("active"),t(this).addClass("active")}),t("#accountName").click(function(){t("#accountName").hide(),t("#accountSwitcher").select2({placeholder:"",minimumInputLength:1,ajax:{url:"http://shift2.app/auth/accounts",dataType:"json",quietMillis:250,data:function(t){return{q:t}},results:function(t){return{results:t}}},formatResult:function(t){return'<span class="account-switcher-result">'+t.text+"</span>"},formatSelection:function(t){return t.text}}),t("#accountSwitcher").on("select2-selecting",function(t){window.location.href="/auth/account/"+t.val}),t("#accountSwitcher").on("select2-close",function(){t("#accountName").show(),t("#accountSwitcher").select2("destroy")})})}(this.jQuery);